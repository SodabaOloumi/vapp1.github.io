{"remainingRequest":"/home/sodaba/vapp1.github.io/node_modules/thread-loader/dist/cjs.js!/home/sodaba/vapp1.github.io/node_modules/babel-loader/lib/index.js!/home/sodaba/vapp1.github.io/node_modules/eslint-loader/index.js??ref--14-0!/home/sodaba/vapp1.github.io/src/index.js","dependencies":[{"path":"/home/sodaba/vapp1.github.io/src/index.js","mtime":1638349379708},{"path":"/home/sodaba/vapp1.github.io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sodaba/vapp1.github.io/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sodaba/vapp1.github.io/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/sodaba/vapp1.github.io/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFdlYjMgZnJvbSAid2ViMyI7CmltcG9ydCBoZWFsdENvbnRyYWN0IGZyb20gIi4uL2J1aWxkL2NvbnRyYWN0cy9IZWFsdC5qc29uIjsKY29uc3QgQXBwID0gewogIHdlYjM6IG51bGwsCiAgYWNjb3VudDogbnVsbCwKICBtZXRhOiBudWxsLAogIHN0YXJ0OiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBjb25zdCB7CiAgICAgIHdlYjMKICAgIH0gPSB0aGlzOwoKICAgIHRyeSB7CiAgICAgIC8vIGdldCBjb250cmFjdCBpbnN0YW5jZQogICAgICBjb25zdCBuZXR3b3JrSWQgPSBhd2FpdCB3ZWIzLmV0aC5uZXQuZ2V0SWQoKTsKICAgICAgY29uc3QgZGVwbG95ZWROZXR3b3JrID0gaGVhbHRDb250cmFjdC5uZXR3b3Jrc1tuZXR3b3JrSWRdOwogICAgICB0aGlzLm1ldGEgPSBuZXcgd2ViMy5ldGguQ29udHJhY3QoaGVhbHRDb250cmFjdC5hYmksIGRlcGxveWVkTmV0d29yay5hZGRyZXNzKTsgLy8gZ2V0IGFjY291bnRzCgogICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHdlYjMuZXRoLmdldEFjY291bnRzKCk7CiAgICAgIHRoaXMuYWNjb3VudCA9IGFjY291bnRzWzBdOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcigiQ291bGQgbm90IGNvbm5lY3QgdG8gY29udHJhY3Qgb3IgY2hhaW4uIik7CiAgICB9CiAgfSwKICBzZXRTdGF0dXM6IGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICBjb25zdCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RhdHVzIik7CiAgICBzdGF0dXMuaW5uZXJIVE1MID0gbWVzc2FnZTsKICB9LAogIGFkZFBhdGllbnQ6IGFzeW5jIGZ1bmN0aW9uIChfYWRkcmVzcywgX2Z1bGxOYW1lKSB7CiAgICBjb25zdCB7CiAgICAgIGFkZFBhdGllbnQKICAgIH0gPSB0aGlzLm1ldGEubWV0aG9kczsKICAgIGF3YWl0IGFkZFBhdGllbnQoX2FkZHJlc3MsIF9mdWxsTmFtZSkuc2VuZCh7CiAgICAgIGZyb206IHRoaXMuYWNjb3VudAogICAgfSk7CiAgfSwKICBhZGREb2N0b3I6IGFzeW5jIGZ1bmN0aW9uIChfYWRkcmVzcywgX2Z1bGxOYW1lKSB7CiAgICBjb25zdCB7CiAgICAgIGFkZERvY3RvcgogICAgfSA9IHRoaXMubWV0YS5tZXRob2RzOwogICAgYXdhaXQgYWRkRG9jdG9yKF9hZGRyZXNzLCBfZnVsbE5hbWUpLnNlbmQoewogICAgICBmcm9tOiB0aGlzLmFjY291bnQKICAgIH0pOwogIH0sCiAgYWRkUmVjb3JkOiBhc3luYyBmdW5jdGlvbiAoX2Z1bGxOYW1lLCBfcGF0aWVudEFkZHJlc3MsIF9kb2N0b3JBZGRyZXNzLCBfY2MsIF9waSwgX2NvbW1lbnQsIF9taCwgX3JlY29yZE5hbWUsIF9yZWNvcmRJZCkgewogICAgY29uc3QgewogICAgICBhZGRSZWNvcmQKICAgIH0gPSB0aGlzLm1ldGEubWV0aG9kczsKICAgIGF3YWl0IGFkZFJlY29yZChfZnVsbE5hbWUsIF9wYXRpZW50QWRkcmVzcywgX2RvY3RvckFkZHJlc3MsIF9jYywgX3BpLCBfY29tbWVudCwgX21oLCBfcmVjb3JkTmFtZSwgX3JlY29yZElkKS5zZW5kKHsKICAgICAgZnJvbTogdGhpcy5hY2NvdW50CiAgICB9KTsKICB9LAogIGdldFJlY29yZDogYXN5bmMgZnVuY3Rpb24gZ2V0UmVjb3JkKF9hZGRyZXNzLCBfcmVjb3JkTmFtZSkgewogICAgY29uc3QgewogICAgICBnZXRSZWNvcmQKICAgIH0gPSB0aGlzLm1ldGEubWV0aG9kczsKICAgIGxldCByZWNvcmQgPSBhd2FpdCBnZXRSZWNvcmQoX2FkZHJlc3MsIF9yZWNvcmROYW1lKS5jYWxsKCk7CiAgICByZXR1cm4gcmVjb3JkOwogIH0sCiAgZ3JhbnRQZXJtaXNzaW9uOiBhc3luYyBmdW5jdGlvbiBncmFudFBlcm1pc3Npb24oX3BhdGllbnRBZGRyZXNzLCBfdmlld25lciwgX3JlY29yZE5hbWUpIHsKICAgIGNvbnN0IHsKICAgICAgZ3JhbnRQZXJtaXNzaW9uCiAgICB9ID0gdGhpcy5tZXRhLm1ldGhvZHM7CiAgICBhd2FpdCBncmFudFBlcm1pc3Npb24oX3BhdGllbnRBZGRyZXNzLCBfdmlld25lciwgX3JlY29yZE5hbWUpLnNlbmQoewogICAgICBmcm9tOiB0aGlzLmFjY291bnQKICAgIH0pOwogIH0sCiAgcmV2b3JrUGVybWlzc2lvbjogYXN5bmMgZnVuY3Rpb24gcmV2b3JrUGVybWlzc2lvbihfcGF0aWVudEFkZHJlc3MsIF92aWV3bmVyLCBfcmVjb3JkTmFtZSkgewogICAgY29uc3QgewogICAgICByZXZvcmtQZXJtaXNzaW9uCiAgICB9ID0gdGhpcy5tZXRhLm1ldGhvZHM7CiAgICBhd2FpdCByZXZvcmtQZXJtaXNzaW9uKF9wYXRpZW50QWRkcmVzcywgX3ZpZXduZXIsIF9yZWNvcmROYW1lKS5zZW5kKHsKICAgICAgZnJvbTogdGhpcy5hY2NvdW50CiAgICB9KTsKICB9LAogIHJlY29yZE9mOiBhc3luYyBmdW5jdGlvbiByZWNvcmRPZihhZGRyZXNzKSB7CiAgICBjb25zdCB7CiAgICAgIHJlY29yZE9mCiAgICB9ID0gdGhpcy5tZXRhLm1ldGhvZHM7CiAgICBsZXQgcmVjb3JkID0gYXdhaXQgcmVjb3JkT2YoYWRkcmVzcykuY2FsbCgpOwogICAgcmV0dXJuIHJlY29yZDsKICB9LAogIG93bmVyT2ZSZWNvcmQ6IGFzeW5jIGZ1bmN0aW9uIG93bmVyT2ZSZWNvcmQocmVjb3JkSWQpIHsKICAgIGNvbnN0IHsKICAgICAgb3duZXJPZlJlY29yZAogICAgfSA9IHRoaXMubWV0YS5tZXRob2RzOwogICAgbGV0IG93bmVyID0gYXdhaXQgb3duZXJPZlJlY29yZChyZWNvcmRJZCkuY2FsbCgpOwogICAgcmV0dXJuIG93bmVyOwogIH0KfTsKd2luZG93LkFwcCA9IEFwcDsKd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBhc3luYyBmdW5jdGlvbiAoKSB7CiAgaWYgKHdpbmRvdy5ldGhlcmV1bSkgewogICAgLy8gdXNlIE1ldGFNYXNrJ3MgcHJvdmlkZXIKICAgIEFwcC53ZWIzID0gbmV3IFdlYjMod2luZG93LmV0aGVyZXVtKTsKICAgIGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5lbmFibGUoKTsgLy8gZ2V0IHBlcm1pc3Npb24gdG8gYWNjZXNzIGFjY291bnRzCiAgfSBlbHNlIHsKICAgIGNvbnNvbGUud2FybigiTm8gd2ViMyBkZXRlY3RlZC4gRmFsbGluZyBiYWNrIHRvIGh0dHA6Ly8xNzIuMC4wLjE6NzU0NS4gWW91IHNob3VsZCByZW1vdmUgdGhpcyBmYWxsYmFjayB3aGVuIHlvdSBkZXBsb3kgbGl2ZSIpOyAvLyBmYWxsYmFjayAtIHVzZSB5b3VyIGZhbGxiYWNrIHN0cmF0ZWd5IChsb2NhbCBub2RlIC8gaG9zdGVkIG5vZGUgKyBpbi1kYXBwIGlkIG1nbXQgLyBmYWlsKQoKICAgIEFwcC53ZWIzID0gbmV3IFdlYjMobmV3IFdlYjMucHJvdmlkZXJzLkh0dHBQcm92aWRlcigiaHR0cDovLzE3Mi4wLjAuMSIpKTsKICB9CgogIEFwcC5zdGFydCgpOwp9KTsKZXhwb3J0IGRlZmF1bHQgewogIEFwcAp9Ow=="},{"version":3,"sources":["/home/sodaba/vapp1.github.io/src/index.js"],"names":["Web3","healtContract","App","web3","account","meta","start","networkId","eth","net","getId","deployedNetwork","networks","Contract","abi","address","accounts","getAccounts","error","console","setStatus","message","status","document","getElementById","innerHTML","addPatient","_address","_fullName","methods","send","from","addDoctor","addRecord","_patientAddress","_doctorAddress","_cc","_pi","_comment","_mh","_recordName","_recordId","getRecord","record","call","grantPermission","_viewner","revorkPermission","recordOf","ownerOfRecord","recordId","owner","window","addEventListener","ethereum","enable","warn","providers","HttpProvider"],"mappings":"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","sourcesContent":["import Web3 from \"web3\";\nimport healtContract from \"../build/contracts/Healt.json\";\nconst App = {\n  web3: null,\n  account: null,\n  meta: null,\n\n  start: async function() {\n    const { web3 } = this;\n\n    try {\n      // get contract instance\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = healtContract.networks[networkId];\n      this.meta = new web3.eth.Contract(\n        healtContract.abi,\n        deployedNetwork.address\n      );\n\n      // get accounts\n      const accounts = await web3.eth.getAccounts();\n      this.account = accounts[0];\n    } catch (error) {\n      console.error(\"Could not connect to contract or chain.\");\n    }\n  },\n\n  setStatus: function(message) {\n    const status = document.getElementById(\"status\");\n    status.innerHTML = message;\n  },\n  addPatient: async function(_address, _fullName) {\n    const { addPatient } = this.meta.methods;\n    await addPatient(_address,  _fullName).send({\n      from: this.account\n    });\n  },\n  addDoctor: async function(_address, _fullName) {\n    const { addDoctor } = this.meta.methods;\n    await addDoctor(_address,  _fullName).send({\n      from: this.account\n    });\n  },\n  addRecord: async function( _fullName, _patientAddress , _doctorAddress ,\n    _cc , _pi , _comment , _mh, _recordName , _recordId) {\n    const { addRecord } = this.meta.methods;\n    await addRecord( _fullName, _patientAddress , _doctorAddress ,\n      _cc , _pi , _comment , _mh, _recordName , _recordId).send({\n      from: this.account\n    });\n  },\n  getRecord: async function getRecord( _address, _recordName) {\n    const { getRecord } = this.meta.methods;\n   let record= await getRecord( _address, _recordName).call();\n   return record;\n  },\n  grantPermission: async function grantPermission( _patientAddress, _viewner, _recordName  ) {\n    const { grantPermission } = this.meta.methods;\n    await grantPermission(_patientAddress, _viewner, _recordName ).send({\n      from: this.account\n    });\n  },\n  revorkPermission: async function revorkPermission( _patientAddress, _viewner, _recordName  ) {\n    const { revorkPermission } = this.meta.methods;\n    await revorkPermission(_patientAddress, _viewner, _recordName ).send({\n      from: this.account\n    });\n  },\n  recordOf: async function recordOf(address) {\n    const { recordOf } = this.meta.methods;\n   let record = await recordOf(address).call();\n   return record;\n  },\n  ownerOfRecord: async function ownerOfRecord(recordId) {\n    const { ownerOfRecord } = this.meta.methods;\n   let owner = await ownerOfRecord(recordId).call();\n   return owner;\n  },\n  \n \n};\n\nwindow.App = App;\n\nwindow.addEventListener(\"load\", async function() {\n  if (window.ethereum) {\n    // use MetaMask's provider\n    App.web3 = new Web3(window.ethereum);\n    await window.ethereum.enable(); // get permission to access accounts\n  } else {\n    console.warn(\n      \"No web3 detected. Falling back to http://172.0.0.1:7545. You should remove this fallback when you deploy live\"\n    );\n    // fallback - use your fallback strategy (local node / hosted node + in-dapp id mgmt / fail)\n    App.web3 = new Web3(\n      new Web3.providers.HttpProvider(\"http://172.0.0.1\")\n    );\n  }\n\n  App.start();\n});\nexport default { App };\n"]}]}